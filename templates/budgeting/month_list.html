{% extends 'budgeting/base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Months</h1>
  <div>
    <form class="d-flex" method="get" action="{% url 'budgeting:month_create' %}">
      <input type="text" name="month" class="form-control me-2" placeholder="YYYY-MM">
      <button class="btn btn-primary" type="submit">Create/Go</button>
    </form>
  </div>
  </div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Month</th>
      <th>Status</th>
      <th>Income</th>
      <th>Recurring</th>
      <th>Variable</th>
      <th>Total</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
  {% for m in months %}
    <tr>
      <td><a href="{% url 'budgeting:month_detail' m.pk %}">{{ m }}</a></td>
      <td>
        {% if m.status == 'closed' %}
          <span class="badge bg-secondary">Closed</span>
        {% else %}
          <span class="badge bg-success">Open</span>
        {% endif %}
      </td>
      <td>£{{ m.net_income }}</td>
      <td>£{{ m.total_recurring }}</td>
      <td>£{{ m.total_variable }}</td>
      <td>£{{ m.total_expenses }}</td>
      <td>£{{ m.balance }}</td>
    </tr>
  {% empty %}
    <tr><td colspan="7" class="text-center">No months yet. Use the form to create one.</td></tr>
  {% endfor %}
  </tbody>
  </table>
{% endblock %}
